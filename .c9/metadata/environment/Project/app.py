{"filter":false,"title":"app.py","tooltip":"/Project/app.py","undoManager":{"mark":65,"position":65,"stack":[[{"start":{"row":1015,"column":0},"end":{"row":1020,"column":0},"action":"insert","lines":["","","","","",""],"id":996,"ignore":true}],[{"start":{"row":1016,"column":0},"end":{"row":1016,"column":1},"action":"insert","lines":["#"],"id":997,"ignore":true}],[{"start":{"row":1016,"column":1},"end":{"row":1016,"column":10},"action":"insert","lines":["########g"],"id":998,"ignore":true}],[{"start":{"row":1016,"column":10},"end":{"row":1016,"column":11},"action":"insert","lines":["u"],"id":999,"ignore":true}],[{"start":{"row":1016,"column":11},"end":{"row":1016,"column":13},"action":"insert","lines":["ni"],"id":1000,"ignore":true}],[{"start":{"row":1016,"column":13},"end":{"row":1016,"column":16},"action":"insert","lines":["cor"],"id":1001,"ignore":true}],[{"start":{"row":1016,"column":16},"end":{"row":1016,"column":18},"action":"insert","lines":["n3"],"id":1002,"ignore":true}],[{"start":{"row":1016,"column":17},"end":{"row":1016,"column":18},"action":"remove","lines":["3"],"id":1003,"ignore":true},{"start":{"row":1016,"column":17},"end":{"row":1016,"column":18},"action":"insert","lines":["#"]}],[{"start":{"row":1016,"column":18},"end":{"row":1018,"column":21},"action":"insert","lines":["##############","from flask import Flask","app = Flask(__name__)"],"id":1004,"ignore":true}],[{"start":{"row":1018,"column":21},"end":{"row":1021,"column":0},"action":"remove","lines":["","","",""],"id":1005,"ignore":true}],[{"start":{"row":1022,"column":0},"end":{"row":1022,"column":2},"action":"insert","lines":["# "],"id":1006,"ignore":true},{"start":{"row":1023,"column":0},"end":{"row":1023,"column":2},"action":"insert","lines":["# "]}],[{"start":{"row":195,"column":46},"end":{"row":195,"column":64},"action":"insert","lines":["f'after_detection_"],"id":1007}],[{"start":{"row":195,"column":64},"end":{"row":195,"column":65},"action":"insert","lines":["{"],"id":1008}],[{"start":{"row":195,"column":76},"end":{"row":195,"column":78},"action":"insert","lines":["''"],"id":1009}],[{"start":{"row":195,"column":77},"end":{"row":195,"column":78},"action":"remove","lines":["'"],"id":1010}],[{"start":{"row":1017,"column":0},"end":{"row":1017,"column":2},"action":"insert","lines":["# "],"id":1011,"ignore":true},{"start":{"row":1018,"column":0},"end":{"row":1018,"column":2},"action":"insert","lines":["# "]}],[{"start":{"row":1022,"column":0},"end":{"row":1022,"column":2},"action":"remove","lines":["# "],"id":1012,"ignore":true},{"start":{"row":1023,"column":0},"end":{"row":1023,"column":2},"action":"remove","lines":["# "]}],[{"start":{"row":197,"column":5},"end":{"row":197,"column":6},"action":"insert","lines":[")"],"id":1013,"ignore":true}],[{"start":{"row":197,"column":5},"end":{"row":197,"column":6},"action":"remove","lines":[")"],"id":1014,"ignore":true}],[{"start":{"row":197,"column":5},"end":{"row":198,"column":4},"action":"insert","lines":["","    "],"id":1015,"ignore":true}],[{"start":{"row":198,"column":4},"end":{"row":198,"column":5},"action":"insert","lines":[")"],"id":1016,"ignore":true}],[{"start":{"row":197,"column":5},"end":{"row":198,"column":5},"action":"remove","lines":["","    )"],"id":1017,"ignore":true}],[{"start":{"row":197,"column":4},"end":{"row":197,"column":5},"action":"remove","lines":[")"],"id":1018,"ignore":true}],[{"start":{"row":197,"column":4},"end":{"row":197,"column":5},"action":"insert","lines":[")"],"id":1019,"ignore":true}],[{"start":{"row":193,"column":0},"end":{"row":197,"column":5},"action":"remove","lines":["    result_url = s3.generate_presigned_url(","        'get_object',","        Params={'Bucket': \"resultimg\", 'Key': f'after_detection_{image_code}',","        ExpiresIn=3600  # URL's expiration time in seconds","    )"],"id":1020,"ignore":true},{"start":{"row":193,"column":0},"end":{"row":197,"column":1},"action":"insert","lines":["result_url = s3.generate_presigned_url(","    'get_object',","    Params={'Bucket': \"resultimg\", 'Key': f'after_detection_{image_code}'},","    ExpiresIn=3600  # URL's expiration time in seconds",")"]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "],"id":1021,"ignore":true},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":1017,"column":0},"end":{"row":1017,"column":2},"action":"remove","lines":["# "],"id":1022,"ignore":true},{"start":{"row":1018,"column":0},"end":{"row":1018,"column":2},"action":"remove","lines":["# "]}],[{"start":{"row":1017,"column":0},"end":{"row":1017,"column":23},"action":"remove","lines":["from flask import Flask"],"id":1023,"ignore":true}],[{"start":{"row":1016,"column":32},"end":{"row":1017,"column":0},"action":"remove","lines":["",""],"id":1024,"ignore":true}],[{"start":{"row":1017,"column":15},"end":{"row":1017,"column":18},"action":"remove","lines":["ame"],"id":1025,"ignore":true}],[{"start":{"row":1017,"column":14},"end":{"row":1017,"column":15},"action":"remove","lines":["n"],"id":1026,"ignore":true},{"start":{"row":1017,"column":14},"end":{"row":1017,"column":15},"action":"insert","lines":["m"]}],[{"start":{"row":1017,"column":15},"end":{"row":1017,"column":16},"action":"insert","lines":["a"],"id":1027,"ignore":true}],[{"start":{"row":1017,"column":16},"end":{"row":1017,"column":17},"action":"insert","lines":["i"],"id":1028,"ignore":true}],[{"start":{"row":1017,"column":17},"end":{"row":1017,"column":18},"action":"insert","lines":["n"],"id":1029,"ignore":true}],[{"start":{"row":1017,"column":15},"end":{"row":1017,"column":18},"action":"remove","lines":["ain"],"id":1030,"ignore":true}],[{"start":{"row":1017,"column":14},"end":{"row":1017,"column":15},"action":"remove","lines":["m"],"id":1031,"ignore":true},{"start":{"row":1017,"column":14},"end":{"row":1017,"column":15},"action":"insert","lines":["n"]}],[{"start":{"row":1017,"column":15},"end":{"row":1017,"column":16},"action":"insert","lines":["a"],"id":1032,"ignore":true}],[{"start":{"row":1017,"column":16},"end":{"row":1017,"column":17},"action":"insert","lines":["m"],"id":1033,"ignore":true}],[{"start":{"row":1017,"column":17},"end":{"row":1017,"column":18},"action":"insert","lines":["e"],"id":1034,"ignore":true}],[{"start":{"row":1017,"column":0},"end":{"row":1017,"column":2},"action":"insert","lines":["# "],"id":1035,"ignore":true}],[{"start":{"row":263,"column":0},"end":{"row":263,"column":2},"action":"insert","lines":["# "],"id":1036},{"start":{"row":265,"column":0},"end":{"row":265,"column":2},"action":"insert","lines":["# "]},{"start":{"row":266,"column":0},"end":{"row":266,"column":2},"action":"insert","lines":["# "]},{"start":{"row":267,"column":0},"end":{"row":267,"column":2},"action":"insert","lines":["# "]},{"start":{"row":268,"column":0},"end":{"row":268,"column":2},"action":"insert","lines":["# "]},{"start":{"row":269,"column":0},"end":{"row":269,"column":2},"action":"insert","lines":["# "]},{"start":{"row":270,"column":0},"end":{"row":270,"column":2},"action":"insert","lines":["# "]},{"start":{"row":272,"column":0},"end":{"row":272,"column":2},"action":"insert","lines":["# "]},{"start":{"row":273,"column":0},"end":{"row":273,"column":2},"action":"insert","lines":["# "]},{"start":{"row":274,"column":0},"end":{"row":274,"column":2},"action":"insert","lines":["# "]},{"start":{"row":275,"column":0},"end":{"row":275,"column":2},"action":"insert","lines":["# "]},{"start":{"row":276,"column":0},"end":{"row":276,"column":2},"action":"insert","lines":["# "]},{"start":{"row":277,"column":0},"end":{"row":277,"column":2},"action":"insert","lines":["# "]},{"start":{"row":279,"column":0},"end":{"row":279,"column":2},"action":"insert","lines":["# "]},{"start":{"row":280,"column":0},"end":{"row":280,"column":2},"action":"insert","lines":["# "]},{"start":{"row":282,"column":0},"end":{"row":282,"column":2},"action":"insert","lines":["# "]},{"start":{"row":283,"column":0},"end":{"row":283,"column":2},"action":"insert","lines":["# "]},{"start":{"row":284,"column":0},"end":{"row":284,"column":2},"action":"insert","lines":["# "]},{"start":{"row":286,"column":0},"end":{"row":286,"column":2},"action":"insert","lines":["# "]},{"start":{"row":287,"column":0},"end":{"row":287,"column":2},"action":"insert","lines":["# "]},{"start":{"row":288,"column":0},"end":{"row":288,"column":2},"action":"insert","lines":["# "]},{"start":{"row":289,"column":0},"end":{"row":289,"column":2},"action":"insert","lines":["# "]},{"start":{"row":291,"column":0},"end":{"row":291,"column":2},"action":"insert","lines":["# "]},{"start":{"row":293,"column":0},"end":{"row":293,"column":2},"action":"insert","lines":["# "]},{"start":{"row":294,"column":0},"end":{"row":294,"column":2},"action":"insert","lines":["# "]},{"start":{"row":295,"column":0},"end":{"row":295,"column":2},"action":"insert","lines":["# "]},{"start":{"row":296,"column":0},"end":{"row":296,"column":2},"action":"insert","lines":["# "]},{"start":{"row":297,"column":0},"end":{"row":297,"column":2},"action":"insert","lines":["# "]}],[{"start":{"row":262,"column":49},"end":{"row":262,"column":50},"action":"remove","lines":["트"],"id":1037},{"start":{"row":262,"column":48},"end":{"row":262,"column":49},"action":"remove","lines":["스"]},{"start":{"row":262,"column":47},"end":{"row":262,"column":48},"action":"remove","lines":["테"]}],[{"start":{"row":262,"column":47},"end":{"row":262,"column":48},"action":"insert","lines":["원"],"id":1038},{"start":{"row":262,"column":48},"end":{"row":262,"column":49},"action":"insert","lines":["본"]}],[{"start":{"row":260,"column":42},"end":{"row":260,"column":43},"action":"insert","lines":["테"],"id":1039},{"start":{"row":260,"column":43},"end":{"row":260,"column":44},"action":"insert","lines":["스"]},{"start":{"row":260,"column":44},"end":{"row":260,"column":45},"action":"insert","lines":["트"]}],[{"start":{"row":261,"column":0},"end":{"row":312,"column":0},"action":"insert","lines":["import boto3","from flask import Flask, render_template, request, session","","app = Flask(__name__)","","# Set your S3 bucket region and access credentials here","S3_BUCKET_REGION = 'ap-northeast-2'","S3_ACCESS_KEY = 'your_s3_access_key'","S3_SECRET_ACCESS_KEY = 'your_s3_secret_access_key'","","@app.route('/result', methods=['GET'])","def result():","    oauth_code = session.get('oauth_code', '')","    image_code = request.args.get('code', '')","    identifier = request.args.get('identifier', '')","    print(f\"Received identifier: {identifier}\")","","    # Fetch images from S3 based on the identifier","    image_urls = get_image_urls_from_s3(identifier)","","    return render_template('page4.html', image_urls=image_urls, identifier=identifier, image_code=image_code)","","def get_image_urls_from_s3(identifier):","    image_urls = []","","    s3 = boto3.client(","        service_name=\"s3\",","        region_name=S3_BUCKET_REGION,","        aws_access_key_id=S3_ACCESS_KEY,","        aws_secret_access_key=S3_SECRET_ACCESS_KEY","    )","","    # Fetch images from S3 based on the identifier","    folder_name = f\"{identifier.rsplit('_', 1)[0]}\"","    objects = get_objects_from_s3(s3, \"resultimg\", folder_name)","","    # Get the URLs of the objects and append them to the image_urls list","    for obj in objects:","        image_url = f\"https://resultimg.s3.ap-northeast-2.amazonaws.com/{obj['Key']}\"","        image_urls.append(image_url)","","    return image_urls","","def get_objects_from_s3(s3_client, bucket_name, folder_name):","    # Retrieve objects from the specified folder in the S3 bucket","    response = s3_client.list_objects_v2(Bucket=bucket_name, Prefix=folder_name)","    objects = response.get('Contents', [])","    return objects","","if __name__ == '__main__':","    app.run()",""],"id":1040}],[{"start":{"row":311,"column":13},"end":{"row":312,"column":0},"action":"remove","lines":["",""],"id":1041}],[{"start":{"row":309,"column":0},"end":{"row":311,"column":13},"action":"remove","lines":["","if __name__ == '__main__':","    app.run()"],"id":1042},{"start":{"row":308,"column":18},"end":{"row":309,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":308,"column":18},"end":{"row":309,"column":0},"action":"insert","lines":["",""],"id":1043},{"start":{"row":309,"column":0},"end":{"row":309,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":309,"column":0},"end":{"row":309,"column":4},"action":"remove","lines":["    "],"id":1044}],[{"start":{"row":261,"column":0},"end":{"row":270,"column":0},"action":"remove","lines":["import boto3","from flask import Flask, render_template, request, session","","app = Flask(__name__)","","# Set your S3 bucket region and access credentials here","S3_BUCKET_REGION = 'ap-northeast-2'","S3_ACCESS_KEY = 'your_s3_access_key'","S3_SECRET_ACCESS_KEY = 'your_s3_secret_access_key'",""],"id":1045}],[{"start":{"row":266,"column":51},"end":{"row":267,"column":47},"action":"remove","lines":["","    print(f\"Received identifier: {identifier}\")"],"id":1046}],[{"start":{"row":266,"column":51},"end":{"row":267,"column":0},"action":"insert","lines":["",""],"id":1047},{"start":{"row":267,"column":0},"end":{"row":267,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":267,"column":4},"end":{"row":267,"column":71},"action":"insert","lines":["directory_name_split = request.args.get('directory_name_split', '')"],"id":1048}],[{"start":{"row":272,"column":108},"end":{"row":272,"column":109},"action":"insert","lines":[","],"id":1049}],[{"start":{"row":272,"column":109},"end":{"row":272,"column":110},"action":"insert","lines":[" "],"id":1050}],[{"start":{"row":272,"column":110},"end":{"row":272,"column":130},"action":"insert","lines":["directory_name_split"],"id":1051}],[{"start":{"row":272,"column":130},"end":{"row":272,"column":131},"action":"insert","lines":["="],"id":1052}],[{"start":{"row":272,"column":131},"end":{"row":272,"column":151},"action":"insert","lines":["directory_name_split"],"id":1053}],[{"start":{"row":262,"column":0},"end":{"row":299,"column":18},"action":"remove","lines":["@app.route('/result', methods=['GET'])","def result():","    oauth_code = session.get('oauth_code', '')","    image_code = request.args.get('code', '')","    identifier = request.args.get('identifier', '')","    directory_name_split = request.args.get('directory_name_split', '')","","    # Fetch images from S3 based on the identifier","    image_urls = get_image_urls_from_s3(identifier)","","    return render_template('page4.html', image_urls=image_urls, identifier=identifier, image_code=image_code, directory_name_split=directory_name_split)","","def get_image_urls_from_s3(identifier):","    image_urls = []","","    s3 = boto3.client(","        service_name=\"s3\",","        region_name=S3_BUCKET_REGION,","        aws_access_key_id=S3_ACCESS_KEY,","        aws_secret_access_key=S3_SECRET_ACCESS_KEY","    )","","    # Fetch images from S3 based on the identifier","    folder_name = f\"{identifier.rsplit('_', 1)[0]}\"","    objects = get_objects_from_s3(s3, \"resultimg\", folder_name)","","    # Get the URLs of the objects and append them to the image_urls list","    for obj in objects:","        image_url = f\"https://resultimg.s3.ap-northeast-2.amazonaws.com/{obj['Key']}\"","        image_urls.append(image_url)","","    return image_urls","","def get_objects_from_s3(s3_client, bucket_name, folder_name):","    # Retrieve objects from the specified folder in the S3 bucket","    response = s3_client.list_objects_v2(Bucket=bucket_name, Prefix=folder_name)","    objects = response.get('Contents', [])","    return objects"],"id":1054}],[{"start":{"row":262,"column":0},"end":{"row":314,"column":0},"action":"insert","lines":["import boto3","from flask import Flask, render_template, request, session","","app = Flask(__name__)","","# Set your S3 bucket region and access credentials here","S3_BUCKET_REGION = 'ap-northeast-2'","S3_ACCESS_KEY = 'your_s3_access_key'","S3_SECRET_ACCESS_KEY = 'your_s3_secret_access_key'","","@app.route('/result/<directory_name_split>', methods=['GET'])","def result(directory_name_split):","    oauth_code = session.get('oauth_code', '')","    image_code = request.args.get('code', '')","    print(f\"Received identifier: {directory_name_split}\")","","    # Fetch images from S3 based on the directory_name_split","    image_urls = get_image_urls_from_s3(directory_name_split)","","    return render_template('page4.html', image_urls=image_urls, identifier=directory_name_split, image_code=image_code)","","def get_image_urls_from_s3(directory_name_split):","    image_urls = []","","    s3 = boto3.client(","        service_name=\"s3\",","        region_name=S3_BUCKET_REGION,","        aws_access_key_id=S3_ACCESS_KEY,","        aws_secret_access_key=S3_SECRET_ACCESS_KEY","    )","","    # Fetch objects from S3 based on the directory_name_split","    objects = get_objects_from_s3(s3, \"resultimg\", directory_name_split)","","    # Sort objects based on filenames","    sorted_objects = sorted(objects, key=lambda obj: obj['Key'])","","    # Get the URLs of the objects and append them to the image_urls list","    for obj in sorted_objects:","        image_url = f\"https://resultimg.s3.ap-northeast-2.amazonaws.com/{obj['Key']}\"","        image_urls.append(image_url)","","    return image_urls","","def get_objects_from_s3(s3_client, bucket_name, folder_name):","    # Retrieve objects from the specified folder in the S3 bucket","    response = s3_client.list_objects_v2(Bucket=bucket_name, Prefix=folder_name)","    objects = response.get('Contents', [])","    return objects","","if __name__ == '__main__':","    app.run()",""],"id":1055}],[{"start":{"row":313,"column":13},"end":{"row":314,"column":0},"action":"remove","lines":["",""],"id":1056},{"start":{"row":313,"column":12},"end":{"row":313,"column":13},"action":"remove","lines":[")"]},{"start":{"row":313,"column":11},"end":{"row":313,"column":12},"action":"remove","lines":["("]},{"start":{"row":313,"column":10},"end":{"row":313,"column":11},"action":"remove","lines":["n"]},{"start":{"row":313,"column":9},"end":{"row":313,"column":10},"action":"remove","lines":["u"]},{"start":{"row":313,"column":8},"end":{"row":313,"column":9},"action":"remove","lines":["r"]},{"start":{"row":313,"column":7},"end":{"row":313,"column":8},"action":"remove","lines":["."]},{"start":{"row":313,"column":6},"end":{"row":313,"column":7},"action":"remove","lines":["p"]},{"start":{"row":313,"column":5},"end":{"row":313,"column":6},"action":"remove","lines":["p"]},{"start":{"row":313,"column":4},"end":{"row":313,"column":5},"action":"remove","lines":["a"]},{"start":{"row":313,"column":0},"end":{"row":313,"column":4},"action":"remove","lines":["    "]},{"start":{"row":312,"column":26},"end":{"row":313,"column":0},"action":"remove","lines":["",""]},{"start":{"row":312,"column":25},"end":{"row":312,"column":26},"action":"remove","lines":[":"]},{"start":{"row":312,"column":24},"end":{"row":312,"column":25},"action":"remove","lines":["'"]},{"start":{"row":312,"column":23},"end":{"row":312,"column":24},"action":"remove","lines":["_"]},{"start":{"row":312,"column":22},"end":{"row":312,"column":23},"action":"remove","lines":["_"]},{"start":{"row":312,"column":21},"end":{"row":312,"column":22},"action":"remove","lines":["n"]},{"start":{"row":312,"column":20},"end":{"row":312,"column":21},"action":"remove","lines":["i"]},{"start":{"row":312,"column":19},"end":{"row":312,"column":20},"action":"remove","lines":["a"]},{"start":{"row":312,"column":18},"end":{"row":312,"column":19},"action":"remove","lines":["m"]},{"start":{"row":312,"column":17},"end":{"row":312,"column":18},"action":"remove","lines":["_"]},{"start":{"row":312,"column":16},"end":{"row":312,"column":17},"action":"remove","lines":["_"]},{"start":{"row":312,"column":15},"end":{"row":312,"column":16},"action":"remove","lines":["'"]},{"start":{"row":312,"column":14},"end":{"row":312,"column":15},"action":"remove","lines":[" "]},{"start":{"row":312,"column":13},"end":{"row":312,"column":14},"action":"remove","lines":["="]},{"start":{"row":312,"column":12},"end":{"row":312,"column":13},"action":"remove","lines":["="]},{"start":{"row":312,"column":11},"end":{"row":312,"column":12},"action":"remove","lines":[" "]},{"start":{"row":312,"column":10},"end":{"row":312,"column":11},"action":"remove","lines":["_"]},{"start":{"row":312,"column":9},"end":{"row":312,"column":10},"action":"remove","lines":["_"]},{"start":{"row":312,"column":8},"end":{"row":312,"column":9},"action":"remove","lines":["e"]},{"start":{"row":312,"column":7},"end":{"row":312,"column":8},"action":"remove","lines":["m"]},{"start":{"row":312,"column":6},"end":{"row":312,"column":7},"action":"remove","lines":["a"]},{"start":{"row":312,"column":5},"end":{"row":312,"column":6},"action":"remove","lines":["n"]},{"start":{"row":312,"column":4},"end":{"row":312,"column":5},"action":"remove","lines":["_"]},{"start":{"row":312,"column":3},"end":{"row":312,"column":4},"action":"remove","lines":["_"]},{"start":{"row":312,"column":2},"end":{"row":312,"column":3},"action":"remove","lines":[" "]},{"start":{"row":312,"column":1},"end":{"row":312,"column":2},"action":"remove","lines":["f"]},{"start":{"row":312,"column":0},"end":{"row":312,"column":1},"action":"remove","lines":["i"]}],[{"start":{"row":311,"column":0},"end":{"row":312,"column":0},"action":"remove","lines":["",""],"id":1057},{"start":{"row":310,"column":18},"end":{"row":311,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":262,"column":0},"end":{"row":271,"column":0},"action":"remove","lines":["import boto3","from flask import Flask, render_template, request, session","","app = Flask(__name__)","","# Set your S3 bucket region and access credentials here","S3_BUCKET_REGION = 'ap-northeast-2'","S3_ACCESS_KEY = 'your_s3_access_key'","S3_SECRET_ACCESS_KEY = 'your_s3_secret_access_key'",""],"id":1058},{"start":{"row":261,"column":0},"end":{"row":262,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":265,"column":45},"end":{"row":266,"column":57},"action":"remove","lines":["","    print(f\"Received identifier: {directory_name_split}\")"],"id":1059}],[{"start":{"row":261,"column":0},"end":{"row":299,"column":18},"action":"remove","lines":["","@app.route('/result/<directory_name_split>', methods=['GET'])","def result(directory_name_split):","    oauth_code = session.get('oauth_code', '')","    image_code = request.args.get('code', '')","","    # Fetch images from S3 based on the directory_name_split","    image_urls = get_image_urls_from_s3(directory_name_split)","","    return render_template('page4.html', image_urls=image_urls, identifier=directory_name_split, image_code=image_code)","","def get_image_urls_from_s3(directory_name_split):","    image_urls = []","","    s3 = boto3.client(","        service_name=\"s3\",","        region_name=S3_BUCKET_REGION,","        aws_access_key_id=S3_ACCESS_KEY,","        aws_secret_access_key=S3_SECRET_ACCESS_KEY","    )","","    # Fetch objects from S3 based on the directory_name_split","    objects = get_objects_from_s3(s3, \"resultimg\", directory_name_split)","","    # Sort objects based on filenames","    sorted_objects = sorted(objects, key=lambda obj: obj['Key'])","","    # Get the URLs of the objects and append them to the image_urls list","    for obj in sorted_objects:","        image_url = f\"https://resultimg.s3.ap-northeast-2.amazonaws.com/{obj['Key']}\"","        image_urls.append(image_url)","","    return image_urls","","def get_objects_from_s3(s3_client, bucket_name, folder_name):","    # Retrieve objects from the specified folder in the S3 bucket","    response = s3_client.list_objects_v2(Bucket=bucket_name, Prefix=folder_name)","    objects = response.get('Contents', [])","    return objects"],"id":1062}],[{"start":{"row":264,"column":0},"end":{"row":264,"column":2},"action":"remove","lines":["# "],"id":1063},{"start":{"row":266,"column":0},"end":{"row":266,"column":2},"action":"remove","lines":["# "]},{"start":{"row":267,"column":0},"end":{"row":267,"column":2},"action":"remove","lines":["# "]},{"start":{"row":268,"column":0},"end":{"row":268,"column":2},"action":"remove","lines":["# "]},{"start":{"row":269,"column":0},"end":{"row":269,"column":2},"action":"remove","lines":["# "]},{"start":{"row":270,"column":0},"end":{"row":270,"column":2},"action":"remove","lines":["# "]},{"start":{"row":271,"column":0},"end":{"row":271,"column":2},"action":"remove","lines":["# "]},{"start":{"row":273,"column":0},"end":{"row":273,"column":2},"action":"remove","lines":["# "]},{"start":{"row":274,"column":0},"end":{"row":274,"column":2},"action":"remove","lines":["# "]},{"start":{"row":275,"column":0},"end":{"row":275,"column":2},"action":"remove","lines":["# "]},{"start":{"row":276,"column":0},"end":{"row":276,"column":2},"action":"remove","lines":["# "]},{"start":{"row":277,"column":0},"end":{"row":277,"column":2},"action":"remove","lines":["# "]},{"start":{"row":278,"column":0},"end":{"row":278,"column":2},"action":"remove","lines":["# "]},{"start":{"row":280,"column":0},"end":{"row":280,"column":2},"action":"remove","lines":["# "]},{"start":{"row":281,"column":0},"end":{"row":281,"column":2},"action":"remove","lines":["# "]},{"start":{"row":283,"column":0},"end":{"row":283,"column":2},"action":"remove","lines":["# "]},{"start":{"row":284,"column":0},"end":{"row":284,"column":2},"action":"remove","lines":["# "]},{"start":{"row":285,"column":0},"end":{"row":285,"column":2},"action":"remove","lines":["# "]},{"start":{"row":287,"column":0},"end":{"row":287,"column":2},"action":"remove","lines":["# "]},{"start":{"row":288,"column":0},"end":{"row":288,"column":2},"action":"remove","lines":["# "]},{"start":{"row":289,"column":0},"end":{"row":289,"column":2},"action":"remove","lines":["# "]},{"start":{"row":290,"column":0},"end":{"row":290,"column":2},"action":"remove","lines":["# "]},{"start":{"row":292,"column":0},"end":{"row":292,"column":2},"action":"remove","lines":["# "]},{"start":{"row":294,"column":0},"end":{"row":294,"column":2},"action":"remove","lines":["# "]},{"start":{"row":295,"column":0},"end":{"row":295,"column":2},"action":"remove","lines":["# "]},{"start":{"row":296,"column":0},"end":{"row":296,"column":2},"action":"remove","lines":["# "]},{"start":{"row":297,"column":0},"end":{"row":297,"column":2},"action":"remove","lines":["# "]},{"start":{"row":298,"column":0},"end":{"row":298,"column":2},"action":"remove","lines":["# "]}]]},"ace":{"folds":[],"scrolltop":4216.7672119140625,"scrollleft":0,"selection":{"start":{"row":284,"column":51},"end":{"row":284,"column":51},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":262,"state":"start","mode":"ace/mode/python"}},"timestamp":1690184880857,"hash":"27853932105f201dfe441e9c135f3da370317d23"}